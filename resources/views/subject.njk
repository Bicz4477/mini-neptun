{% extends 'page' %}

{% block content %}

<div class="panel panel-default">
    <div class="panel-heading">Tantárgy információk</div>
    <div class="panel-body">
    <div class="row">
        <div class="col-md-4 col-sm-6 col-xs-12">Tantárgy neve: {{ subject.name }}</div>
        <div class="col-md-4 col-sm-6 col-xs-12">Kredit: {{ subject.credit }}</div>
        <div class="col-md-4 col-sm-6 col-xs-12">Felelős oktató: {{ teacher.full_name }}</div>
        <div class="col-md-4 col-sm-6 col-xs-12">Web: <a href="{{ subject.web }}">{{ subject.web }}</a></div>
        <div class="col-md-4 col-sm-6 col-xs-12">Leírás: {{ subject.description }}</div>
    </div>
    </div>
</div>
<div class="panel panel-default">
<div class="panel-heading">Tárgy kurzusai</div>
<div class="panel-body">
{% if courses != null %}
<table class="table table-striped table-bordered table-hover">
    <thead>
        <tr>
            <th>Kurzus szám</th>
            <th>Létszám/MaxLétszám</th>
            <th>oktató</th>
            <th>Időpont</th>
            <th>Terem</th>
        </tr>
    </thead>
     <tbody>
        {% for course in courses %}
        <tr>
            <td>
                {{ course.id }}
            </td>
            <td>
                {{ course.headcount}}/{{ course.max_headcount}}
            </td>
            <td>
                {{ course.teacher.user.full_name}}
            </td>
            <td>
                {{ course.class_schedule}}
            </td>
            <td>
                {{ course.room}}
            </td>
            {% if teacher.id == currentUser.id %}
            <td align="center">
                <a href="/subject/{{ subject.id }}/editcourse/{{ course.id }}" class="btn btn-default btn-sm">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                </a>
            </td>
            {% endif %}
            {% if "student" == currentUser.type %}
            <td align="center">
                {% if signedUpCourseId == 0 %}
                    {% if course.isClosed == true %}
                        Jelentkezés zárolva
                    {% elif course.max_headcount != course.headcount %}
                        <a href="/signup/{{course.id}}">Jelentkezés</a>
                    {% else %}
                        Megtelt
                    {% endif %}
                {% elif signedUpCourseId == course.id %}
                    <a href="/signdown/{{course.id}}">Lead</a>
                {% endif %}
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
Nincs kurzus!!
{% endif %}
</div>
{% if currentUser.type == "teacher" and currentUser.id == teacher.id %}
    <a href="/subject/{{ param_id }}/addcourse" class="btn btn-default">Új kurzus</a>
{% endif %}
</div>

{% endblock %}